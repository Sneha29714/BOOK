<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student Dashboard</title>

  <!-- Font Awesome (optional, kept for future icons) -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

  <style>
    * {
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }

    body {
      margin: 0;
      background: #f4f6f8;
    }
    

    /* ================= SIDEBAR ================= */
    .sidebar {
      width: 280px;
      background-color:#2c3e50;
      color:white;
      height: 100vh;
      position: fixed;
      left: 0;
      top: 0;
      padding: 20px;
    }

    
    .sidebar label {
      display: block;
      margin-top: 15px;
      font-size: 18px;

    }

    .sidebar label:hover{
      background-color: #34495e;
    }

    .sidebar select {
      width: 100%;
      padding: 8px;
      margin-top: 6px;
      border-radius: 6px;
      border: none;
      background-color:white;
      font-size: 18px;
      opacity:0.8;
    }

    /* ================= MAIN CONTENT ================= */
    .content-wrapper {
      margin-left: 260px; /* SAME AS SIDEBAR WIDTH */
      padding: 25px;
    }

    /* ================= SEARCH SECTION ================= */
    .search-section {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      margin-bottom: 25px;
    }

    .search-section input {
      padding: 10px;
      width: 220px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    .search-section button {
      padding: 10px 16px;
      border-radius: 6px;
      border: none;
      background: #2563eb;
      color: white;
      cursor: pointer;
    }

    /* ================= TABLE ================= */
    .course-table {
      width: 100%;
      border-collapse: collapse;
      background: white;
      margin-top: 100px;
    }

    .course-table th,
    .course-table td {
      padding: 14px;
      border: 1px solid #ddd;
      text-align: center;
    }

    .course-table th {
      background: #e5e7eb;
      font-weight: bold;
    }

    .course-table button {
      padding: 6px 12px;
      background: #10b981;
      border: none;
      color: white;
      border-radius: 6px;
      cursor: pointer;
    }


    /* ================= PROFILE BOX ================= */
.profile-box {
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  padding: 15px;
  text-align: center;
  margin-bottom: 25px;
}

.profile-icon {
  font-size: 55px;
  color: #ecf0f1;
  margin-bottom: 8px;
}

.profile-info p {
  margin: 4px 0;
  font-size: 14px;
  color: #f1f5f9;
}

.student-name {
  font-size: 16px;
  font-weight: bold;
}







body {
  font-family: Arial, sans-serif;
  background: #f4f6f9;
}

.container {
  margin: 40px;
  background: white;
  padding: 20px;
  border-radius: 8px;
}

table {
  width: 100%;
  border-collapse: collapse;
}

th {
  background: #e3e7ee;
  padding: 12px;
}

td {
  padding: 12px;
  border-bottom: 1px solid #ddd;
  text-align: center;
}

.view-btn {
  background: #28a745;
  color: white;
  border: none;
  padding: 6px 14px;
  border-radius: 4px;
  cursor: pointer;
}

.hidden {
  display: none;
}

.inner-table {
  width: 80%;
  margin: 10px auto;
  border-collapse: collapse;
}

.inner-table th {
  background: #f1f1f1;
}

.inner-table td {
  padding: 8px;
}

.no-books {
  color: #777;
  text-align: center;
}

input,
textarea,
select {
  color: #0f172a;   /* FORCE visible text */
  background: #fff;
}
.bot-message .bubble {
  color: #0f172a !important;
  font-size: 0.95rem;
  line-height: 1.4;
}
/* üî• FIX CHAT INPUT BAR ISSUE */
#chatPopup button {
  width: auto !important;
  margin-top: 0 !important;
  padding: 10px 18px;
  flex-shrink: 0;
}

#chatPopup input {
  margin-top: 0 !important;
}
/* ================= CHAT MESSAGE SEPARATION ================= */

.message {
  display: flex;
  margin: 8px 0;
}

/* USER MESSAGE (RIGHT SIDE) */
.user-message {
  justify-content: flex-end;
}

.user-message .bubble {
  background: linear-gradient(135deg,#667eea,#764ba2);
  color: white;
  padding: 10px 14px;
  border-radius: 18px 18px 4px 18px;
  max-width: 75%;
  font-size: 0.95rem;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
}

/* BOT MESSAGE (LEFT SIDE) */
.bot-message {
  justify-content: flex-start;
}

.bot-message .bubble {
  background: #e5e7eb;
  color: #0f172a;
  padding: 10px 14px;
  border-radius: 18px 18px 18px 4px;
  max-width: 75%;
  font-size: 0.95rem;
}

/* OPTIONAL: smooth appearance */
.message {
  animation: fadeIn 0.25s ease-in;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(4px); }
  to { opacity: 1; transform: translateY(0); }
}


  </style>
</head>

<body>

  <!-- SIDEBAR (ALWAYS VISIBLE) -->
  <div class="sidebar">
   
    <i class="fas fa-bars"></i>
<!-- STUDENT PROFILE BOX -->
<div class="profile-box">
  <i class="fas fa-user-circle profile-icon"></i>

  <div class="profile-info">
    <p class="student-name">Student Name</p>
    <p class="student-reg">Reg No:</p>
    <p class="student-branch">Branch: </p>
  </div>
</div>
    <label onclick="goToDashboard()">
  <i class="fa-solid fa-house"></i> Dashboard
</label>

<label>
  <i class="fa-solid fa-book"></i> Syllabus
</label>
        
<select id="subjectSelect" onchange="showSyllabus()" style="width:250px; padding:8px;">
  <option value="" disabled selected>Select Subject</option>
  <option value="ds">Data Structure</option>
  <option value="physics">Physics</option>
</select>

<!-- Syllabus Section -->
<div id="syllabusSection" style="display:none; margin-top:20px;">
  <h4 id="syllabusTitle"></h4>
  <ul id="syllabusContent"></ul>
</div>
<label>
<button  onclick="openLibraryFromStudent()"></button><i class="fas fa-library" ></i> Library
</label>

<label>
  <i class="fa-solid fa-calendar-days"></i> Due Date
</label>

<label onclick="logout()" style="color:#ffd6d6;">
  <i class="fa-solid fa-right-from-bracket"></i> Log Out
</label>
  </div>

  <!-- MAIN CONTENT -->
  <div class="content-wrapper">

        

    <!-- SEARCH -->
    <div class="search-section">
  <input type="text" id="searchBook" placeholder="book name">
  <input type="text" id="searchAuthor" placeholder="author">
  <button onclick="searchBook()">Search</button>
</div>
<div class="container">
<h2>Student Dashboard</h2>

<table>
<tr>
  <th>Course Code</th>
  <th>Course Name</th>
  <th>Teacher</th>
  <th>Books Recommended</th>
</tr>

<tr>
  <td>CS101</td>
  <td>Data Structures</td>
  <td>ATG</td>
  <td>
    <button class="view-btn" onclick="toggleBooks()">View Books</button>
  </td>
</tr>

<tr id="booksRow" class="hidden">
  <td colspan="4">
    <table class="inner-table">
      <thead>
        <tr>
          <th>Book Name</th>
          <th>Author</th>
        </tr>
      </thead>
      <tbody id="booksBody"></tbody>
    </table>
  </td>
</tr>

</table>
</div>
<!-- FLOATING CHAT BOT ICON -->
<button id="chatToggle" style="
position:fixed;
bottom:20px;
right:20px;
z-index:999;
width:60px;
height:60px;
border-radius:50%;
border:none;
background:linear-gradient(135deg,#667eea,#764ba2);
color:white;
font-size:26px;
cursor:pointer;
box-shadow:0 8px 20px rgba(0,0,0,0.3);
"> üí¨ </button>

<!-- CHAT BOT POPUP -->
<div id="chatPopup" style="
display:none;
position:fixed;
bottom:90px;
right:20px;
z-index:999;
width:560px;
height:630px;
background:#fff;
border-radius:20px;
box-shadow:0 10px 40px rgba(0,0,0,0.3);
overflow:hidden;
flex-direction:column;
">




  <div style="
background:linear-gradient(135deg,#667eea,#764ba2);
color:white;
padding:14px;
text-align:center;
font-weight:600;
"> ‚ú® Chat Assistant </div>

  <div id="messages" style="
flex:1;
overflow-y:auto;
padding:12px;
background:#f8f9fa;
"></div>

  <div style="
display:flex;
align-items:center;
padding:10px;
border-top:1px solid #351fa4;
gap:10px;
background:#fff;
">

   <input id="userInput" placeholder="Type or speak..." style="flex:1;padding:10px;border-radius:20px;border:1px solid #ccc;outline:none;" onkeypress="handleKeyPress(event)">

<button id="sendBtn" onclick="sendMessage()" style="padding:10px 16px;border:none;border-radius:20px;background:#667eea;color:white;"> Send </button>


  </div>

</div>


<script>
const COURSE_CODE = "CS101";

function toggleBooks() {
  const row = document.getElementById("booksRow");
  const body = document.getElementById("booksBody");

  if (!row || !body) {
    console.error("booksRow or booksBody missing");
    return;
  }

  row.classList.toggle("hidden");

  if (row.classList.contains("hidden")) return;

  body.innerHTML = "";

  let data = JSON.parse(localStorage.getItem("recommendedBooks")) || {};
  let books = data[COURSE_CODE] || [];

  if (books.length === 0) {
    body.innerHTML = `
      <tr>
        <td colspan="2" class="no-books">No books recommended yet</td>
      </tr>`;
    return;
  }

  books.forEach(b => {
    body.innerHTML += `
      <tr>
        <td>${b.bookName}</td>
        <td>${b.author}</td>
      </tr>`;
  });
}
</script>
<script>
const STORAGE_KEY = "recommendedBooksList";

function renderBooks() {
  const container = document.getElementById("recommendedBooks");
  container.innerHTML = "";

  const books = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

  books.forEach((b) => {
    const div = document.createElement("div");
    div.innerText = `${b.bookName} - ${b.author}`;
    container.appendChild(div);
  });
}

window.addEventListener("DOMContentLoaded", renderBooks);
</script>

  <script>




  function checkLibrary(bookName) {
    alert("Checking library for: " + bookName);
  }

  const syllabusData = {
    ds: [
      "Introduction to Data Structures",
      "Arrays and Linked Lists",
      "Stacks and Queues",
      "Trees and Graphs",
      "Sorting and Searching",
      "Hashing"
    ],
    physics: [
      "Units and Measurements",
      "Kinematics",
      "Laws of Motion",
      "Work, Energy and Power",
      "Thermodynamics"
    ]
  };

let lastSelected = "";

function showSyllabus() {
  const select = document.getElementById("subjectSelect");
  const subject = select.value;

  const section = document.getElementById("syllabusSection");
  const title = document.getElementById("syllabusTitle");
  const content = document.getElementById("syllabusContent");

  // If no subject selected
  if (!subject) return;

  // Toggle close if same subject clicked
  if (lastSelected === subject) {
    section.style.display = "none";
    select.selectedIndex = 0;
    lastSelected = "";
    return;
  }

  // Open syllabus
  content.innerHTML = "";
  section.style.display = "block";
  lastSelected = subject;

  title.innerText =
    subject === "ds"
      ? "Data Structure Syllabus"
      : "Physics Syllabus";

  syllabusData[subject].forEach(topic => {
    const li = document.createElement("li");
    li.innerText = topic;
    content.appendChild(li);
  });
}

function logout(){
  window.location.href="login.html";
}

function goToDashboard(){
  window.location.href="studentDashboard.html";
}

const sidebar = document.getElementById("sidebar");
const main = document.getElementById("main");
const dashboard = document.getElementById("dashboard");
const library = document.getElementById("library");

/* DEMO BOOK DATABASE */
const bookDatabase = [
    {
        title: "Data Structures",
        author: "Seymour Lipschutz",
        edition: "2nd Edition",
        year: "2018",
        department: "Computer Science",
        status: "Available",
        description: "This book provides a clear and concise introduction to data structures.",
        cover: "https://via.placeholder.com/200x280?text=Data+Structures",
        location: {
            floor: "2nd Floor",
            room: "Degree Room",
            shelf: "B",
            row: "3"
        }
    }
];

function searchBook() {
    const book = document.getElementById("searchBook").value.toLowerCase();
    const author = document.getElementById("searchAuthor").value.toLowerCase();

    const result = bookDatabase.find(b =>
        b.title.toLowerCase().includes(book) &&
        b.author.toLowerCase().includes(author)
    );

    if (!result) {
        alert("Book not found");
        return;
    }

    /* SAVE RESULT & REDIRECT */
    localStorage.setItem("selectedBook", JSON.stringify(result));
    window.location.href = "books.html";
}



</script>


<script>
function showBooks() {
  const table = document.getElementById("booksTable");
  const tbody = document.getElementById("booksBody");

  // make table visible
  table.style.display = "table";

  // clear old rows (important)
  tbody.innerHTML = "";

  let books = JSON.parse(localStorage.getItem("recommendedBooks")) || [];

  if (books.length === 0) {
    tbody.innerHTML = `
      <tr>
        <td colspan="4" style="text-align:center;">No recommended books yet</td>
      </tr>
    `;
    return;
  }

  books.forEach(book => {
    const row = `
      <tr>
        <td>${book.bookName}</td>
        <td>${book.author}</td>
        <td>${book.courseName}</td>
        <td>${book.batch}</td>
      </tr>
    `;
    tbody.innerHTML += row;
  });
}
</script>
<script>
function openLibraryFromStudent() {
    localStorage.setItem("librarySource", "student");
    window.location.href = "index.html";
}

     const API_KEY = "AIzaSyBdTzBE28QA3e9dGR246iGsPvOCl12fm7g";     //ENTER YOUR API KEY

const chatToggle = document.getElementById("chatToggle");
const chatPopup  = document.getElementById("chatPopup");
const messages   = document.getElementById("messages");

//  chatToggle.onclick = () => {
//   if (
//     chatPopup.style.display === "" ||
//     chatPopup.style.display === "none"
//   ) {
//     chatPopup.style.display = "flex";
//   } else {
//     chatPopup.style.display = "none";
//   }
// };
document.addEventListener("DOMContentLoaded", () => {
  const chatToggle = document.getElementById("chatToggle");
  const chatPopup  = document.getElementById("chatPopup");

  chatToggle.addEventListener("click", () => {
    const currentDisplay =
      window.getComputedStyle(chatPopup).display;

    if (currentDisplay === "none") {
      chatPopup.style.display = "flex";
    } else {
      chatPopup.style.display = "none";
    }
  });
});



function handleKeyPress(e){
  if(e.key==="Enter") sendMessage();
}

async function sendMessage(){
  const input=document.getElementById("userInput");
  const btn=document.getElementById("sendBtn");
  if(!input.value.trim()) return;

  addMsg(input.value,"user");
  const text=input.value;
  input.value = "";
input.focus();
btn.disabled = true;


  const typing=document.createElement("div");
  typing.className="bot-message";
  typing.innerHTML=`<div class="bubble typing">
    <span></span><span></span><span></span>
  </div>`;
  messages.appendChild(typing);
  messages.scrollTop=messages.scrollHeight;

  try{
    const res=await fetch(
      `https://generativelanguage.googleapis.com/v1/models/gemini-2.5-flash:generateContent?key=${API_KEY}`,
      {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body:JSON.stringify({
          contents:[{ parts:[{ text:text }] }]
        })
      }
    );
    const data=await res.json();
    typing.remove();
    addMsg(data.candidates[0].content.parts[0].text,"bot");
  }catch{
    typing.remove();
    addMsg("Network error ‚ùå","bot");
  }finally{
    btn.disabled=false;
  }
}

function addMsg(text,type){
  const div=document.createElement("div");
  div.className=`message ${type}-message`;
  div.innerHTML=`<div class="bubble">${escapeHtml(text)}</div>`;
  messages.appendChild(div);
  messages.scrollTop=messages.scrollHeight;
}

function escapeHtml(t){
  const d=document.createElement("div");
  d.textContent=t;
  return d.innerHTML;
}

const userInput = document.getElementById("userInput");
const sendBtn   = document.getElementById("sendBtn");

/* ENTER KEY FIX */
userInput.addEventListener("keydown", (e) => {
  if (e.key === "Enter" && !e.shiftKey) {
    e.preventDefault();
    sendMessage();
  }
});

/* BUTTON CLICK */
sendBtn.addEventListener("click", sendMessage);


</script>
</body>
</html>